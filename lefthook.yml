pre-commit:
  commands:
    rubocop:
      exclude: "application.rb|routes.rb"
      run: |
        COMMAND="rubocop --parallel --force-exclusion --autocorrect --fail-level A {staged_files}"
        docker compose ps|grep -q app && docker compose exec -it app `echo $COMMAND` || docker compose run --rm app `echo $COMMAND`
    bundle-audit:
      run: |
        COMMAND="bundle audit"
        docker compose ps|grep -q app && docker compose exec -it app `echo $COMMAND` || docker compose run --rm app sh -c "bundle && `echo $COMMAND`"
